(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5277:function(e,t,s){Promise.resolve().then(s.bind(s,2041))},2041:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eE}});var a=s(7437),r=s(2265),n=s(9376),l=s(4508);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function o(e){let{className:t,type:s,...r}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}function c(e){let{data:t,setData:s}=e,r=e=>{let t=["green","yellow","red"],s=t.indexOf(e);return t[(s+1)%t.length]};return(0,a.jsx)(i,{className:"bg-[var(--mars-blue-primary)] text-white p-3 md:p-4 shadow-lg animate-slide-up",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,a.jsx)("div",{className:"text-xl font-bold tracking-wider mb-1",children:"MARS"}),(0,a.jsx)(o,{value:t.projectName,onChange:e=>s({...t,projectName:e.target.value}),className:"text-lg font-bold bg-transparent border-none text-white placeholder:text-white/60 p-0 h-auto focus-visible:ring-0 focus-visible:ring-offset-0",placeholder:"Project Name"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1.5 text-xs",children:[(0,a.jsx)("span",{className:"opacity-80 font-semibold",children:"NIIC Date:"}),(0,a.jsx)(o,{type:"month",value:t.niicDate,onChange:e=>s({...t,niicDate:e.target.value}),className:"bg-white/15 border-none text-white w-36 h-6 px-2 rounded text-xs"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2.5 py-1.5 rounded-lg bg-white/15 cursor-pointer hover:bg-white/25 transition-colors backdrop-blur-sm",onClick:()=>s({...t,projectStatus:r(t.projectStatus)}),children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full ".concat({green:"bg-[var(--status-green)]",yellow:"bg-[var(--status-yellow)]",red:"bg-[var(--status-red)]"}[t.projectStatus]," shadow-md")}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[8px] uppercase opacity-70 font-semibold leading-tight",children:"Project Status"}),(0,a.jsx)("span",{className:"text-[11px] font-bold leading-tight",children:{green:"On Track",yellow:"At Risk",red:"Delayed"}[t.projectStatus]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 items-start",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.kpis.map((e,r)=>(0,a.jsxs)("div",{className:"bg-white/15 rounded-lg px-2.5 py-1.5 min-w-[80px] text-center backdrop-blur-sm",children:[(0,a.jsx)(o,{value:e.value,onChange:e=>{let a=[...t.kpis];a[r].value=e.target.value,s({...t,kpis:a})},className:"text-base font-bold bg-transparent border-none text-white text-center p-0 h-auto mb-0.5 focus-visible:ring-0 focus-visible:ring-offset-0"}),(0,a.jsx)(o,{value:e.label,onChange:e=>{let a=[...t.kpis];a[r].label=e.target.value,s({...t,kpis:a})},className:"text-[8px] uppercase opacity-80 bg-transparent border-none text-white text-center p-0 h-auto focus-visible:ring-0 focus-visible:ring-offset-0"})]},r))}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.roles).map(e=>{let[r,n]=e;return(0,a.jsxs)("div",{className:"bg-white/15 rounded-lg px-2.5 py-1.5 min-w-[100px] backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"text-[8px] uppercase opacity-80 mb-0.5 leading-tight",children:"sponsor"===r?"Sponsor":"productOwner"===r?"Product Owner":"Project Manager"}),(0,a.jsx)(o,{value:n,onChange:e=>{s({...t,roles:{...t.roles,[r]:e.target.value}})},className:"text-[11px] font-semibold bg-transparent border-none text-white p-0 h-auto focus-visible:ring-0 focus-visible:ring-offset-0"})]},r)})})]})]})})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}var m=s(7053);let u=(0,s(535).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function x(e){let{className:t,variant:s,size:r,asChild:n=!1,...i}=e,o=n?m.g7:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,l.cn)(u({variant:s,size:r,className:t})),...i})}var p=s(1328),h=s(9680),g=s(7494),b=s(8335),f=s(4935);function v(e){let{onFormat:t,position:s,onClose:n}=e,l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n]),(0,a.jsxs)("div",{ref:l,className:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-1 flex gap-1",style:{left:s.x,top:s.y},children:[(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{t("bold"),n()},className:"h-8 w-8 p-0",title:"Bold",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})}),(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{t("italic"),n()},className:"h-8 w-8 p-0",title:"Italic",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})}),(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{t("underline"),n()},className:"h-8 w-8 p-0",title:"Underline",children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})}),(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{t("link"),n()},className:"h-8 w-8 p-0",title:"Add Link",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>{t("code"),n()},className:"h-8 w-8 p-0",title:"Code",children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]})}function w(e){let{data:t,setData:s}=e,[n,l]=(0,r.useState)({show:!1,x:0,y:0,field:null}),o=(e,t)=>{let s=window.getSelection();s&&s.toString().length>0&&(e.preventDefault(),l({show:!0,x:e.clientX,y:e.clientY,field:t}))};return(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-5 animate-slide-up",children:[(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-3",children:"Goal"}),(0,a.jsx)(d,{value:t.goal,onChange:e=>s({...t,goal:e.target.value}),onContextMenu:e=>o(e,"goal"),placeholder:"Project goal and objectives...",className:"min-h-[100px] resize-none"})]}),(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-3",children:"Description"}),(0,a.jsx)(d,{value:t.description,onChange:e=>s({...t,description:e.target.value}),onContextMenu:e=>o(e,"description"),placeholder:"Detailed project description and context...",className:"min-h-[100px] resize-none"})]}),n.show&&(0,a.jsx)(v,{position:{x:n.x,y:n.y},onFormat:e=>{let a=window.getSelection();if(!a||!n.field)return;let r=a.toString(),l="";switch(e){case"bold":l="**".concat(r,"**");break;case"italic":l="*".concat(r,"*");break;case"underline":l="__".concat(r,"__");break;case"link":let i=prompt("Enter URL:");if(!i)return;l="[".concat(r,"](").concat(i,")");break;case"code":l="`".concat(r,"`")}let o=n.field,c=t[o],d=a.getRangeAt(0),m=d.startOffset,u=d.endOffset,x=c.substring(0,m)+l+c.substring(u);s({...t,[o]:x})},onClose:()=>l({show:!1,x:0,y:0,field:null})})]})}var j=s(3546),y=s(875),N=s(401),k=s(2135);function C(e){let{...t}=e;return(0,a.jsx)(j.fC,{"data-slot":"select",...t})}function S(e){let{...t}=e;return(0,a.jsx)(j.B4,{"data-slot":"select-value",...t})}function D(e){let{className:t,size:s="default",children:r,...n}=e;return(0,a.jsxs)(j.xz,{"data-slot":"select-trigger","data-size":s,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,a.jsx)(j.JO,{asChild:!0,children:(0,a.jsx)(y.Z,{className:"size-4 opacity-50"})})]})}function M(e){let{className:t,children:s,position:r="popper",...n}=e;return(0,a.jsx)(j.h_,{children:(0,a.jsxs)(j.VY,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,a.jsx)(E,{}),(0,a.jsx)(j.l_,{className:(0,l.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(z,{})]})})}function P(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(j.ck,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(j.wU,{children:(0,a.jsx)(N.Z,{className:"size-4"})})}),(0,a.jsx)(j.eT,{children:s})]})}function E(e){let{className:t,...s}=e;return(0,a.jsx)(j.u_,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(k.Z,{className:"size-4"})})}function z(e){let{className:t,...s}=e;return(0,a.jsx)(j.$G,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(y.Z,{className:"size-4"})})}var O=s(9397),A=s(8893),R=s(8930),I=s(519);function Z(e){let{value:t,onCommit:s,className:r}=e,n=(null!=t?t:"").toString();return(0,a.jsx)("span",{contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:e=>{if("Enter"===e.key){var t;null===(t=e.preventDefault)||void 0===t||t.call(e);let s=e.target;null==s||s.blur()}},onBlur:e=>{var t,a;return s((null!==(a=null===(t=e.target)||void 0===t?void 0:t.innerText)&&void 0!==a?a:"").toString().trim())},className:"".concat(null!=r?r:""," cursor-text outline-none ring-1 ring-transparent focus:ring-[var(--mars-blue-primary)]/40 rounded-sm px-0.5"),children:n})}function _(e){if("Enter"===e.key){var t,s;e.preventDefault(),null===(t=(s=e.target).blur)||void 0===t||t.call(s)}}function T(e){var t;let{type:s,title:n,data:l,onChange:o,selectedQuarter:c,onQuarterChange:d}=e,m=(0,r.useRef)(null),[u,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[g,b]=(0,r.useState)(null),[f,v]=(0,r.useState)(null),w=(0,r.useRef)(null);(0,r.useRef)(null),(0,r.useRef)(null);let j=(e,t)=>{e.preventDefault(),e.stopPropagation(),v({x:e.clientX,y:e.clientY,items:t})};(0,r.useEffect)(()=>{let e=()=>v(null);return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.useEffect)(()=>{if(!g)return;let e=e=>{w.current&&cancelAnimationFrame(w.current),w.current=requestAnimationFrame(()=>{if(!m.current)return;let t=m.current.getBoundingClientRect(),s=e.clientX-t.left-120,a=(t.width-120)/l.labels.length,r=Math.max(0,Math.min(l.labels.length-1,Math.floor(s/a)));if("bar"===g.type){let e=l.bars[g.idx],t=e.end-e.start,s=Math.min(l.labels.length-1,r+t),a=[...l.bars];a[g.idx]={...e,start:r,end:s},o({...l,bars:a})}else if("bar-resize"===g.type){let e=l.bars[g.idx],t=[...l.bars];"left"===g.handle?t[g.idx]={...e,start:Math.min(r,e.end)}:t[g.idx]={...e,end:Math.max(r,e.start)},o({...l,bars:t})}else if("milestone"===g.type){let e=l.milestones[g.idx],t=[...l.milestones];t[g.idx]={...e,at:r},o({...l,milestones:t})}else"now-line"===g.type&&o({...l,nowCol:r,nowFrac:Math.max(0,Math.min(1,s%a/a))})})},t=()=>{w.current&&(cancelAnimationFrame(w.current),w.current=null),b(null)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),w.current&&cancelAnimationFrame(w.current)}},[g,l,o]);let y=(e,t)=>{o({...l,bars:[...l.bars,{row:e,start:t,end:t,label:"New Task",status:"green"}]})},N=(e,t)=>{o({...l,milestones:[...l.milestones,{row:e,at:t,label:"Milestone"}]})},k=e=>{let t=l.bars.filter((t,s)=>s!==e);o({...l,bars:t}),x(null)},E=e=>{let t=l.milestones.filter((t,s)=>s!==e);o({...l,milestones:t}),h(null)},z=(e,t)=>{let s=[...l.bars];s[e]={...s[e],status:t},o({...l,bars:s})},T=e=>{var t;let s=new Set((null!==(t=l.rows)&&void 0!==t?t:[]).map(e=>String(e))),a="".concat("Row"," ").concat(e+1),r=window.prompt("Enter row name:",a),n=(null!=r?r:"").trim();if(!n){let t=e+1;for(n="".concat("Row"," ").concat(t);s.has(n);)t+=1,n="".concat("Row"," ").concat(t)}let i=[...l.rows];i.splice(e,0,n);let c=l.bars.map(t=>({...t,row:t.row>=e?t.row+1:t.row})),d=l.milestones.map(t=>({...t,row:null!==t.row&&t.row>=e?t.row+1:t.row}));o({...l,rows:i,bars:c,milestones:d})},F=e=>{var t;let s=new Set((null!==(t=l.rows)&&void 0!==t?t:[]).map(e=>String(e))),a="".concat("Row"," ").concat(e+2),r=window.prompt("Enter row name:",a),n=(null!=r?r:"").trim();if(!n){let t=e+2;for(n="".concat("Row"," ").concat(t);s.has(n);)t+=1,n="".concat("Row"," ").concat(t)}let i=[...l.rows];i.splice(e+1,0,n);let c=l.bars.map(t=>({...t,row:t.row>e?t.row+1:t.row})),d=l.milestones.map(t=>({...t,row:null!==t.row&&t.row>e?t.row+1:t.row}));o({...l,rows:i,bars:c,milestones:d})},L=e=>{let t=l.rows.filter((t,s)=>s!==e),s=l.bars.filter(t=>t.row!==e).map(t=>({...t,row:t.row>e?t.row-1:t.row})),a=l.milestones.filter(t=>null===t.row||t.row!==e).map(t=>({...t,row:null!==t.row&&t.row>e?t.row-1:t.row}));o({...l,rows:t,bars:s,milestones:a})},J=(e,t)=>{let s=[...l.rows];s[e]=t,o({...l,rows:s})},G=(e,t)=>{let s=[...l.bars];s[e]={...s[e],label:t},o({...l,bars:s})},Q=(e,t)=>{let s=[...l.milestones];s[e]={...s[e],label:t},o({...l,milestones:s})},U=(e,t)=>{let s=[...l.labels];s[e]=t,o({...l,labels:s})},X=(0,r.useMemo)(()=>{var e;return(null===(e=m.current)||void 0===e?void 0:e.offsetWidth)||0},[null===(t=m.current)||void 0===t?void 0:t.offsetWidth]);return(0,a.jsxs)(i,{className:"p-4 md:p-6 shadow-sm hover:shadow-md transition-shadow animate-slide-up",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h3",{className:"text-base md:text-lg font-bold text-[var(--mars-blue-primary)]",children:n}),"quarter"===s&&"function"==typeof d&&(0,a.jsxs)(C,{value:null==c?void 0:c.toString(),onValueChange:e=>d(Number.parseInt(e)),children:[(0,a.jsx)(D,{className:"w-24 h-8 text-sm",children:(0,a.jsx)(S,{placeholder:"Q"})}),(0,a.jsxs)(M,{children:[(0,a.jsx)(P,{value:"0",children:"Q1"}),(0,a.jsx)(P,{value:"1",children:"Q2"}),(0,a.jsx)(P,{value:"2",children:"Q3"}),(0,a.jsx)(P,{value:"3",children:"Q4"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 w-full sm:w-auto",children:[(0,a.jsxs)("button",{onClick:()=>{var e,t,s;let a=new Set((null!==(t=l.rows)&&void 0!==t?t:[]).map(e=>String(e))),r=(null!==(s=null===(e=l.rows)||void 0===e?void 0:e.length)&&void 0!==s?s:0)+1,n="".concat("Row"," ").concat(r);for(;a.has(n);)r+=1,n="".concat("Row"," ").concat(r);o({...l,rows:[...l.rows,n]})},className:"px-3 py-1.5 text-sm bg-[var(--mars-blue-primary)] text-white rounded-md hover:opacity-90 transition-opacity flex items-center gap-2 print:hidden",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Row"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs md:text-sm flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[var(--status-green)]"}),(0,a.jsx)("span",{children:"On Track"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[var(--status-yellow)]"}),(0,a.jsx)("span",{children:"At Risk"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[var(--status-red)]"}),(0,a.jsx)("span",{children:"Delayed"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex mb-2 overflow-x-auto",children:[(0,a.jsx)("div",{className:"w-[120px] flex-shrink-0"}),(0,a.jsx)("div",{className:"flex-1 flex border-b border-gray-300 min-w-max",children:l.labels.map((e,t)=>{var s,r;return(0,a.jsx)("div",{className:"flex-1 text-center text-xs py-2 hover:bg-gray-50 cursor-pointer min-w-[60px]",onDoubleClick:()=>{let s=prompt("Edit label:","string"==typeof e?e:e.top);s&&U(t,s)},onContextMenu:e=>j(e,[{label:"Add column right",action:()=>{}},{label:"Delete column",action:()=>{}}]),children:"string"==typeof e?e:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"font-semibold text-[10px]",children:(0,a.jsx)(Z,{value:null!==(s=e.top)&&void 0!==s?s:"",onCommit:e=>{var s;let a=(null!==(s=l.labels)&&void 0!==s?s:[]).map((s,a)=>a===t?{...s,top:e}:s);o({...l,labels:a})}})}),(0,a.jsx)("div",{className:"text-[10px] opacity-60",children:(0,a.jsx)(Z,{value:null!==(r=e.bottom)&&void 0!==r?r:"",onCommit:e=>{var s;let a=(null!==(s=l.labels)&&void 0!==s?s:[]).map((s,a)=>a===t?{...s,bottom:e}:s);o({...l,labels:a})}})})]})},t)})})]}),(0,a.jsxs)("div",{ref:m,className:"relative overflow-x-auto",children:[l.rows.map((e,t)=>(0,a.jsxs)("div",{className:"flex min-h-[48px] border-b border-gray-200 hover:bg-gray-50 relative group",onContextMenu:s=>j(s,[{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"})," Add row above"]}),action:()=>T(t)},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"})," Add row below"]}),action:()=>F(t)},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-4 h-4"})," Rename row"]}),action:()=>{let s=prompt("Edit row name:",e);s&&J(t,s)}},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(R.Z,{className:"w-4 h-4"})," Delete row"]}),action:()=>L(t)},{type:"separator"},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"})," Add bar here"]}),action:()=>y(t,0)},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"})," Add milestone"]}),action:()=>N(t,0)}]),children:[(0,a.jsx)("div",{className:"w-[120px] flex-shrink-0 px-2 py-3 text-sm font-semibold flex items-center cursor-pointer",onDoubleClick:()=>{let s=prompt("Edit row name:",e);s&&J(t,s)},children:(0,a.jsx)("span",{contentEditable:!0,suppressContentEditableWarning:!0,className:"cursor-text outline-none ring-1 ring-transparent focus:ring-[var(--mars-blue-primary)]/40 rounded-sm px-0.5",onKeyDown:_,onBlur:e=>(function(e,t,s,a){let r=Array.isArray(null==e?void 0:e.rows)?[...e.rows]:[];r[s]=a,null==t||t({...e,rows:r})})(l,o,t,e.target.innerText.trim()),children:e})}),(0,a.jsxs)("div",{className:"flex-1 flex relative min-w-max",children:[l.labels.map((e,s)=>(0,a.jsx)("div",{className:"flex-1 border-r border-gray-100 relative min-w-[60px]",onDoubleClick:()=>y(t,s),onContextMenu:e=>j(e,[{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"})," Add bar"]}),action:()=>y(t,s)},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"})," Add milestone"]}),action:()=>N(t,s)}])},s)),l.bars.filter(e=>e.row===t).map((e,t)=>{var s;let r=l.bars.indexOf(e),n=100/l.labels.length,i=e.start*n,c=(e.end-e.start+1)*n;return(0,a.jsxs)("div",{className:"absolute top-2 h-8 rounded-md cursor-move flex items-center px-2 text-xs font-semibold text-white transition-shadow ".concat("green"===e.status?"bg-[var(--status-green)]":"yellow"===e.status?"bg-[var(--status-yellow)] text-gray-900":"bg-[var(--status-red)]"," ").concat(u===r?"ring-2 ring-blue-500":""),style:{left:"".concat(i,"%"),width:"".concat(c,"%")},onMouseDown:t=>{0===t.button&&(b({type:"bar",idx:r,startX:t.clientX,startCol:e.start}),x(r))},onDoubleClick:()=>{let t=prompt("Edit bar label:",e.label);t&&G(r,t)},onContextMenu:t=>j(t,[{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-3 h-3 fill-[var(--status-green)] text-[var(--status-green)]"})," On Track"]}),action:()=>z(r,"green")},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-3 h-3 fill-[var(--status-yellow)] text-[var(--status-yellow)]"})," ","At Risk"]}),action:()=>z(r,"yellow")},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-3 h-3 fill-[var(--status-red)] text-[var(--status-red)]"})," Delayed"]}),action:()=>z(r,"red")},{type:"separator"},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-4 h-4"})," Edit label"]}),action:()=>{let t=prompt("Edit bar label:",e.label);t&&G(r,t)}},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(R.Z,{className:"w-4 h-4"})," Delete bar"]}),action:()=>k(r)}]),children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-2 cursor-ew-resize hover:bg-white/30",onMouseDown:t=>{t.stopPropagation(),b({type:"bar-resize",idx:r,startX:t.clientX,startCol:e.start,startEnd:e.end,handle:"left"})}}),(0,a.jsx)("span",{className:"truncate",children:(0,a.jsx)(Z,{value:null!==(s=e.label)&&void 0!==s?s:"",onCommit:e=>{let t=l.bars.map((t,s)=>s===r?{...t,label:e}:t);o({...l,bars:t})}})}),(0,a.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-2 cursor-ew-resize hover:bg-white/30",onMouseDown:t=>{t.stopPropagation(),b({type:"bar-resize",idx:r,startX:t.clientX,startCol:e.start,startEnd:e.end,handle:"right"})}})]},r)})]})]},t)),X>0&&(0,a.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-[var(--mars-blue-primary)] cursor-ew-resize z-10 hover:w-1 transition-all print:hidden",style:{left:"calc(120px + ".concat((l.nowCol+(l.nowFrac||0))/l.labels.length*(X-120),"px)")},onMouseDown:e=>{0===e.button&&b({type:"now-line",idx:-1,startX:e.clientX,startCol:l.nowCol})},children:(0,a.jsx)("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-xs font-bold text-[var(--mars-blue-primary)] whitespace-nowrap bg-white px-2 py-0.5 rounded shadow-sm border border-[var(--mars-blue-primary)]",children:"Мы здесь"})}),X>0&&l.milestones.map((e,t)=>{var s;let r=(X-120)/l.labels.length,n=120+e.at*r+r/2,i=-30;return null!==e.row&&e.row>=0&&e.row<l.rows.length&&(i=48*e.row+24),(0,a.jsxs)("div",{className:"absolute cursor-move z-20 print:hidden ".concat(p===t?"ring-2 ring-blue-500 rounded":""),style:{left:"".concat(n,"px"),top:"".concat(i,"px"),transform:"translate(-50%, -50%)"},onMouseDown:s=>{0===s.button&&(b({type:"milestone",idx:t,startX:s.clientX,startCol:e.at}),h(t))},onDoubleClick:()=>{let s=prompt("Edit milestone:",e.label);s&&Q(t,s)},onContextMenu:s=>j(s,[{label:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-4 h-4"})," Edit label"]}),action:()=>{let s=prompt("Edit milestone:",e.label);s&&Q(t,s)}},{label:(0,a.jsxs)("span",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(R.Z,{className:"w-4 h-4"})," Delete milestone"]}),action:()=>E(t)}]),children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-[var(--mars-blue-primary)] rotate-45 mx-auto mb-1 shadow-lg border-2 border-white"}),(0,a.jsx)("div",{className:"bg-gray-900 text-white px-2 py-1 rounded-full text-[11px] font-semibold whitespace-nowrap max-w-[120px] truncate shadow-md",children:(0,a.jsx)(Z,{value:null!==(s=e.label)&&void 0!==s?s:"",onCommit:e=>{let s=l.milestones.map((s,a)=>a===t?{...s,label:e}:s);o({...l,milestones:s})}})})]},t)})]}),f&&(0,a.jsx)("div",{className:"fixed bg-white shadow-lg rounded-lg py-1 z-50 min-w-[180px] border border-gray-200",style:{left:f.x,top:f.y},onClick:e=>e.stopPropagation(),children:f.items.map((e,t)=>"separator"===e.type?(0,a.jsx)("div",{className:"h-px bg-gray-200 my-1"},t):(0,a.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors",onClick:()=>{e.action(),v(null)},children:e.label},t))})]})}var F=s(2489);function L(e){let{data:t,setData:s}=e,[n,l]=(0,r.useState)({show:!1,x:0,y:0,type:null,index:null}),c=e=>{s({...t,done:t.done.filter((t,s)=>s!==e)})},d=e=>{s({...t,next:t.next.filter((t,s)=>s!==e)})},m=(e,a)=>{let r=[...t.done];r[e]=a,s({...t,done:r})},u=(e,a)=>{let r=[...t.next];r[e]=a,s({...t,next:r})},p=(e,t,s)=>{let a=window.getSelection();a&&a.toString().length>0&&(e.preventDefault(),l({show:!0,x:e.clientX,y:e.clientY,type:t,index:s}))};return(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-5 animate-slide-up",children:[(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-4",children:"Done (Prev Month)"}),(0,a.jsx)("div",{className:"space-y-2",children:t.done.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,a.jsx)(o,{value:e,onChange:e=>m(t,e.target.value),onContextMenu:e=>p(e,"done",t),placeholder:"Completed item...",className:"flex-1"}),(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>c(t),className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]},t))}),(0,a.jsxs)(x,{onClick:()=>{s({...t,done:[...t.done,"New completed item"]})},variant:"outline",size:"sm",className:"mt-4 gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Item"]})]}),(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-4",children:"Next (Next Month)"}),(0,a.jsx)("div",{className:"space-y-2",children:t.next.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,a.jsx)(o,{value:e,onChange:e=>u(t,e.target.value),onContextMenu:e=>p(e,"next",t),placeholder:"Upcoming item...",className:"flex-1"}),(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>d(t),className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]},t))}),(0,a.jsxs)(x,{onClick:()=>{s({...t,next:[...t.next,"New upcoming item"]})},variant:"outline",size:"sm",className:"mt-4 gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Item"]})]}),n.show&&(0,a.jsx)(v,{position:{x:n.x,y:n.y},onFormat:e=>{let s=window.getSelection();if(!s||null===n.type||null===n.index)return;let a=s.toString(),r="";switch(e){case"bold":r="**".concat(a,"**");break;case"italic":r="*".concat(a,"*");break;case"underline":r="__".concat(a,"__");break;case"link":let l=prompt("Enter URL:");if(!l)return;r="[".concat(a,"](").concat(l,")");break;case"code":r="`".concat(a,"`")}let i=("done"===n.type?t.done:t.next)[n.index],o=s.getRangeAt(0),c=o.startOffset,d=o.endOffset,x=i.substring(0,c)+r+i.substring(d);"done"===n.type?m(n.index,x):u(n.index,x)},onClose:()=>l({show:!1,x:0,y:0,type:null,index:null})})]})}function J(e){var t;let{data:s,setData:n}=e,[l,c]=(0,r.useState)(null),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=()=>c(null);return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);let m=e=>{var t;let a=(null!==(t=s.teamMetrics)&&void 0!==t?t:[]).filter((t,s)=>s!==e);n({...s,teamMetrics:a})},u=(e,t,a)=>{var r;let l=[...null!==(r=s.teamMetrics)&&void 0!==r?r:[]];l[e]&&(l[e]={...l[e],[t]:a},n({...s,teamMetrics:l}))},p=(e,t)=>{var a;let r=[...null!==(a=s.teamMetrics)&&void 0!==a?a:[]];r[e]&&(r[e]={...r[e],color:t},n({...s,teamMetrics:r}),c(null))},h=(e,t)=>{e.preventDefault(),e.stopPropagation(),c({x:e.clientX,y:e.clientY,idx:t})},g=(e,t)=>{if(e.ctrlKey&&0===e.button){e.preventDefault(),c({x:e.clientX,y:e.clientY,idx:t});return}("touch"===e.pointerType||"pen"===e.pointerType)&&(d.current=setTimeout(()=>{c({x:e.clientX,y:e.clientY,idx:t})},500))},b=()=>{d.current&&(clearTimeout(d.current),d.current=null)};return(0,a.jsxs)(i,{className:"p-4 md:p-5 shadow-sm hover:shadow-md transition-shadow animate-slide-up",children:[(0,a.jsx)("h3",{className:"text-base md:text-lg font-bold text-[var(--mars-blue-primary)] mb-3",children:"Team Performance"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:(null!==(t=s.teamMetrics)&&void 0!==t?t:[]).map((e,t)=>(0,a.jsxs)("div",{className:"rounded-lg px-2.5 py-1.5 min-w-[80px] relative group cursor-pointer transition-all hover:scale-105 ".concat("green"===e.color?"bg-[var(--status-green)]/20 border-2 border-[var(--status-green)]":"yellow"===e.color?"bg-[var(--status-yellow)]/20 border-2 border-[var(--status-yellow)]":"bg-[var(--status-red)]/20 border-2 border-[var(--status-red)]"),onContextMenu:e=>h(e,t),onPointerDown:e=>g(e,t),onPointerUp:b,children:[(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>m(t),className:"absolute -top-2 -right-2 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity bg-destructive text-destructive-foreground hover:bg-destructive/90",children:(0,a.jsx)(F.Z,{className:"w-3 h-3"})}),(0,a.jsx)(o,{value:e.value,onChange:e=>u(t,"value",e.target.value),className:"text-base font-bold text-center bg-transparent border-none p-0 h-auto mb-0.5 focus-visible:ring-0"}),(0,a.jsx)(o,{value:e.label,onChange:e=>u(t,"label",e.target.value),className:"text-[8px] uppercase text-center bg-transparent border-none p-0 h-auto opacity-80 focus-visible:ring-0"})]},t))}),(0,a.jsxs)(x,{onClick:()=>{var e;n({...s,teamMetrics:[...null!==(e=s.teamMetrics)&&void 0!==e?e:[],{label:"Metric",value:"0",color:"green"}]})},variant:"outline",size:"sm",className:"mt-3 gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent text-xs h-8",children:[(0,a.jsx)(O.Z,{className:"w-3 h-3"}),"Add Metric"]}),l&&(0,a.jsxs)("div",{className:"fixed bg-white shadow-lg rounded-lg py-1 z-50 min-w=[160px] border border-gray-200",style:{left:l.x,top:l.y},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors flex items-center gap-2",onClick:()=>p(l.idx,"green"),children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[var(--status-green)]"}),"On Track"]}),(0,a.jsxs)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors flex items-center gap-2",onClick:()=>p(l.idx,"yellow"),children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[var(--status-yellow)]"}),"At Risk"]}),(0,a.jsxs)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors flex items-center gap-2",onClick:()=>p(l.idx,"red"),children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[var(--status-red)]"}),"Delayed"]})]})]})}function G(e){let{data:t,setData:s}=e,[n,l]=(0,r.useState)({show:!1,x:0,y:0,type:null,index:null}),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&d(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=e=>{s({...t,risks:t.risks.filter((t,s)=>s!==e)})},g=(e,a,r)=>{let n=[...t.risks];n[e][a]=r,s({...t,risks:n})},b=(e,t)=>{e.preventDefault(),e.stopPropagation(),(2===e.button||0===e.button&&e.ctrlKey)&&d({x:e.clientX,y:e.clientY,riskIndex:t})},f=(e,t)=>{0!==e.button||e.ctrlKey||u(setTimeout(()=>{d({x:e.clientX,y:e.clientY,riskIndex:t})},500))},w=()=>{m&&(clearTimeout(m),u(null))},j=e=>{c&&(g(c.riskIndex,"impact",e),d(null))},y=e=>{switch(e){case"green":return"text-green-500";case"yellow":return"text-yellow-500";case"red":return"text-red-500"}},N=e=>{switch(e){case"green":return"Low";case"yellow":return"Medium";case"red":return"High"}},k=e=>{s({...t,artifacts:t.artifacts.filter((t,s)=>s!==e)})},C=(e,a,r)=>{let n=[...t.artifacts];n[e][a]=r,s({...t,artifacts:n})},S=(e,t,s)=>{let a=window.getSelection();a&&a.toString().length>0&&(e.preventDefault(),l({show:!0,x:e.clientX,y:e.clientY,type:t,index:s}))};return(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-5 animate-slide-up",children:[(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-4",children:"Risks"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_100px_1fr] gap-2 pb-2 border-b border-[var(--mars-gray-border)] font-semibold text-sm text-gray-600",children:[(0,a.jsx)("div",{children:"Risk"}),(0,a.jsx)("div",{className:"text-center",children:"Impact"}),(0,a.jsx)("div",{children:"Mitigation"})]}),t.risks.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_100px_1fr] gap-2 items-center group border-b border-[var(--mars-gray-border)] pb-2 relative",children:[(0,a.jsx)(o,{value:e.risk,onChange:e=>g(t,"risk",e.target.value),onContextMenu:e=>S(e,"risk",t),placeholder:"Risk description",className:"border-[var(--mars-gray-border)] focus-visible:ring-[var(--mars-blue-primary)] h-9"}),(0,a.jsxs)("button",{onContextMenu:e=>b(e,t),onClick:e=>{e.ctrlKey&&b(e,t)},onMouseDown:e=>f(e,t),onMouseUp:w,onMouseLeave:w,className:"flex items-center justify-center gap-1 h-9 px-2 rounded border border-[var(--mars-gray-border)] hover:bg-gray-50 transition-colors cursor-pointer",title:"Right-click or Ctrl+Click to change",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 fill-current ".concat(y(e.impact))}),(0,a.jsx)("span",{className:"text-xs",children:N(e.impact)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{value:e.mitigation,onChange:e=>g(t,"mitigation",e.target.value),onContextMenu:e=>S(e,"mitigation",t),placeholder:"Mitigation plan",className:"border-[var(--mars-gray-border)] focus-visible:ring-[var(--mars-blue-primary)] h-9"}),(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>h(t),className:"opacity-0 group-hover:opacity-100 transition-opacity h-9 w-9 flex-shrink-0",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]})]},t))]}),(0,a.jsxs)(x,{onClick:()=>{s({...t,risks:[...t.risks,{risk:"New risk",impact:"yellow",mitigation:"Mitigation plan"}]})},variant:"outline",size:"sm",className:"mt-4 gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Risk"]}),c&&(0,a.jsxs)("div",{ref:p,className:"fixed bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50 min-w-[140px]",style:{left:c.x,top:c.y},children:[(0,a.jsxs)("button",{onClick:()=>j("green"),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 text-sm",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 fill-current text-green-500"}),"Low"]}),(0,a.jsxs)("button",{onClick:()=>j("yellow"),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 text-sm",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 fill-current text-yellow-500"}),"Medium"]}),(0,a.jsxs)("button",{onClick:()=>j("red"),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 text-sm",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 fill-current text-red-500"}),"High"]})]})]}),(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-4",children:"Artifacts"}),(0,a.jsx)("div",{className:"space-y-2",children:t.artifacts.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,a.jsx)(o,{value:e.label,onChange:e=>C(t,"label",e.target.value),onContextMenu:e=>S(e,"artifact",t),className:"flex-1 border-[var(--mars-gray-border)] focus-visible:ring-[var(--mars-blue-primary)]"}),(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>k(t),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]},t))}),(0,a.jsxs)(x,{onClick:()=>{s({...t,artifacts:[...t.artifacts,{label:"\uD83D\uDCC4 New artifact",url:"#"}]})},variant:"outline",size:"sm",className:"mt-4 gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Artifact"]})]}),n.show&&(0,a.jsx)(v,{position:{x:n.x,y:n.y},onFormat:e=>{let s=window.getSelection();if(!s||null===n.type||null===n.index)return;let a=s.toString(),r="";switch(e){case"bold":r="**".concat(a,"**");break;case"italic":r="*".concat(a,"*");break;case"underline":r="__".concat(a,"__");break;case"link":let l=prompt("Enter URL:");if(!l)return;r="[".concat(a,"](").concat(l,")");break;case"code":r="`".concat(a,"`")}let i=s.getRangeAt(0),o=i.startOffset,c=i.endOffset;if("risk"===n.type){let e=t.risks[n.index].risk,s=e.substring(0,o)+r+e.substring(c);g(n.index,"risk",s)}else if("mitigation"===n.type){let e=t.risks[n.index].mitigation,s=e.substring(0,o)+r+e.substring(c);g(n.index,"mitigation",s)}else if("artifact"===n.type){let e=t.artifacts[n.index].label,s=e.substring(0,o)+r+e.substring(c);C(n.index,"label",s)}},onClose:()=>l({show:!1,x:0,y:0,type:null,index:null})})]})}function Q(e){let{data:t,setData:s}=e,[n,l]=(0,r.useState)({show:!1,x:0,y:0});return(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow animate-slide-up",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-4",children:"Comments"}),(0,a.jsx)(d,{value:t.comments,onChange:e=>s({...t,comments:e.target.value}),onContextMenu:e=>{let t=window.getSelection();t&&t.toString().length>0&&(e.preventDefault(),l({show:!0,x:e.clientX,y:e.clientY}))},className:"min-h-[120px] resize-none border-[var(--mars-gray-border)] focus-visible:ring-[var(--mars-blue-primary)]",placeholder:"Additional comments and notes..."}),n.show&&(0,a.jsx)(v,{position:{x:n.x,y:n.y},onFormat:e=>{let a=window.getSelection();if(!a)return;let r=a.toString(),n="";switch(e){case"bold":n="**".concat(r,"**");break;case"italic":n="*".concat(r,"*");break;case"underline":n="__".concat(r,"__");break;case"link":let l=prompt("Enter URL:");if(!l)return;n="[".concat(r,"](").concat(l,")");break;case"code":n="`".concat(r,"`")}let i=a.getRangeAt(0),o=i.startOffset,c=i.endOffset,d=t.comments.substring(0,o)+n+t.comments.substring(c);s({...t,comments:d})},onClose:()=>l({show:!1,x:0,y:0})})]})}function U(e){let{data:t,setData:s}=e,[n,l]=(0,r.useState)({show:!1,x:0,y:0,sectionId:null,itemIndex:null}),c=e=>{s({...t,extraSections:t.extraSections.filter(t=>t.id!==e)})},d=(e,a)=>{s({...t,extraSections:t.extraSections.map(t=>t.id===e?{...t,title:a}:t)})},m=e=>{s({...t,extraSections:t.extraSections.map(t=>t.id===e?{...t,items:[...t.items,"New item"]}:t)})},u=(e,a)=>{s({...t,extraSections:t.extraSections.map(t=>t.id===e?{...t,items:t.items.filter((e,t)=>t!==a)}:t)})},p=(e,a,r)=>{s({...t,extraSections:t.extraSections.map(t=>t.id===e?{...t,items:t.items.map((e,t)=>t===a?r:e)}:t)})},h=(e,t,s)=>{let a=window.getSelection();a&&a.toString().length>0&&(e.preventDefault(),l({show:!0,x:e.clientX,y:e.clientY,sectionId:t,itemIndex:s}))};return(0,a.jsxs)("div",{className:"space-y-5 animate-slide-up",children:[t.extraSections.map(e=>(0,a.jsxs)(i,{className:"p-6 shadow-sm hover:shadow-md transition-shadow relative group",children:[(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>c(e.id),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})}),(0,a.jsx)(o,{value:e.title,onChange:t=>d(e.id,t.target.value),className:"text-lg font-bold text-[var(--mars-blue-primary)] mb-4 border-none p-0 h-auto focus-visible:ring-0"}),(0,a.jsx)("div",{className:"space-y-2",children:e.items.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 group/item",children:[(0,a.jsx)(o,{value:t,onChange:t=>p(e.id,s,t.target.value),onContextMenu:t=>h(t,e.id,s),className:"flex-1 border-[var(--mars-gray-border)] focus-visible:ring-[var(--mars-blue-primary)]"}),(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>u(e.id,s),className:"opacity-0 group-hover/item:opacity-100 transition-opacity",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]},s))}),(0,a.jsxs)(x,{onClick:()=>m(e.id),variant:"outline",size:"sm",className:"mt-4 gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Item"]})]},e.id)),(0,a.jsxs)(x,{onClick:()=>{s({...t,extraSections:[...t.extraSections,{id:Date.now().toString(),title:"New Section",items:["Item 1"]}]})},variant:"outline",className:"w-full gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Add Section"]}),n.show&&(0,a.jsx)(v,{position:{x:n.x,y:n.y},onFormat:e=>{let s=window.getSelection();if(!s||null===n.sectionId||null===n.itemIndex)return;let a=s.toString(),r="";switch(e){case"bold":r="**".concat(a,"**");break;case"italic":r="*".concat(a,"*");break;case"underline":r="__".concat(a,"__");break;case"link":let l=prompt("Enter URL:");if(!l)return;r="[".concat(a,"](").concat(l,")");break;case"code":r="`".concat(a,"`")}let i=t.extraSections.find(e=>e.id===n.sectionId);if(!i)return;let o=i.items[n.itemIndex],c=s.getRangeAt(0),d=c.startOffset,m=c.endOffset,u=o.substring(0,d)+r+o.substring(m);p(n.sectionId,n.itemIndex,u)},onClose:()=>l({show:!1,x:0,y:0,sectionId:null,itemIndex:null})})]})}var X=s(5965),Y=s(4353),K=s(7689),q=s(2735),B=s(1947),W=s(8736),V=s(9027);function H(e){let{...t}=e;return(0,a.jsx)(V.fC,{"data-slot":"dialog",...t})}function $(e){let{...t}=e;return(0,a.jsx)(V.xz,{"data-slot":"dialog-trigger",...t})}function ee(e){let{...t}=e;return(0,a.jsx)(V.h_,{"data-slot":"dialog-portal",...t})}function et(e){let{className:t,...s}=e;return(0,a.jsx)(V.aV,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function es(e){let{className:t,children:s,showCloseButton:r=!0,...n}=e;return(0,a.jsxs)(ee,{"data-slot":"dialog-portal",children:[(0,a.jsx)(et,{}),(0,a.jsxs)(V.VY,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,r&&(0,a.jsxs)(V.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(F.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ea(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function er(e){let{className:t,...s}=e;return(0,a.jsx)(V.Dx,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...s})}var en=s(3245);function el(){let[e,t]=(0,r.useState)(!1);return(0,a.jsxs)(H,{open:e,onOpenChange:t,children:[(0,a.jsx)($,{asChild:!0,children:(0,a.jsxs)(x,{variant:"outline",size:"sm",className:"gap-1 md:gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent text-xs md:text-sm",children:[(0,a.jsx)(en.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Info"})]})}),(0,a.jsxs)(es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(ea,{children:(0,a.jsx)(er,{className:"text-xl font-bold text-[var(--mars-blue-primary)]",children:"Mars One-Pager - Функционал приложения"})}),(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83C\uDFAF Основные возможности"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsx)("li",{children:"Создание и управление проектными one-pager документами"}),(0,a.jsx)("li",{children:"Интерактивные диаграммы Ганта (годовой и квартальный планы)"}),(0,a.jsx)("li",{children:"Управление KPI и финансовыми показателями"}),(0,a.jsx)("li",{children:"Отслеживание рисков и артефактов проекта"}),(0,a.jsx)("li",{children:"Автосохранение и версионирование (до 10 шагов назад)"})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83D\uDCCA Диаграммы Ганта"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Drag & Drop:"})," Перетаскивайте бары и майлстоуны для изменения сроков"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Resize:"})," Изменяйте длительность задач, потянув за края бара"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Статусы:"})," Зелёный (On Track), Жёлтый (At Risk), Красный (Delayed)"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:'Линия "Мы здесь":'})," Перетаскивайте для отметки текущего прогресса"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Майлстоуны:"})," Добавляйте ключевые точки проекта"]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83D\uDDB1️ Контекстное меню"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Правый клик:"})," Открывает контекстное меню с действиями"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Ctrl + Click (Mac):"})," Альтернатива правому клику"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Долгое нажатие:"})," Для тачпадов и сенсорных экранов"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Двойной клик:"})," Быстрое редактирование названий"]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"⌨️ Горячие клавиши"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Ctrl + Z:"})," Отменить последнее действие"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Ctrl + Shift + Z / Ctrl + Y:"})," Повторить действие"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Ctrl + S:"})," Сохранить проект (автосохранение включено)"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Ctrl + E:"})," Экспорт в JSON"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Ctrl + P:"})," Экспорт в PDF"]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83D\uDCBE Экспорт и импорт"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"JSON:"})," Сохранение и загрузка данных проекта"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"PDF:"})," Экспорт в цветной PDF (одно полотно без разрывов)"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"HTML:"})," Статичная HTML-страница для просмотра"]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83C\uDFA8 Форматирование текста"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsx)("li",{children:"Выделите текст и нажмите правую кнопку мыши"}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Жирный:"})," Ctrl + B"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Курсив:"})," Ctrl + I"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Подчёркнутый:"})," Ctrl + U"]}),(0,a.jsx)("li",{children:"Добавление ссылок и блоков кода"})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83D\uDD04 Мультипроектность"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsx)("li",{children:"Создавайте несколько проектов"}),(0,a.jsx)("li",{children:"Переключайтесь между проектами"}),(0,a.jsx)("li",{children:"Дублируйте существующие проекты"}),(0,a.jsx)("li",{children:"Каждый проект сохраняется отдельно с историей изменений"})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83C\uDFAD Режим презентации"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsx)("li",{children:"Добавьте ?presentation=true к URL"}),(0,a.jsx)("li",{children:"Скрывает все элементы управления"}),(0,a.jsx)("li",{children:"Идеально для демонстрации стейкхолдерам"})]})]}),(0,a.jsxs)("section",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-bold text-base mb-2",children:"\uD83D\uDCA1 Советы"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsx)("li",{children:"Все изменения автоматически сохраняются в браузере"}),(0,a.jsx)("li",{children:"Используйте контекстное меню для быстрого доступа к функциям"}),(0,a.jsx)("li",{children:"Регулярно экспортируйте проекты в JSON для резервного копирования"}),(0,a.jsx)("li",{children:"Верхнее меню появляется при наведении мыши на область шапки"})]})]})]})]})]})}function ei(e){let{onExportJSON:t,onImportJSON:s,onExportPDF:r,onExportPNG:n,onUndo:l,onRedo:i,canUndo:o=!1,canRedo:c=!1}=e;return(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 md:gap-3 justify-end print:hidden animate-fade-in",children:[(0,a.jsx)(el,{}),l&&(0,a.jsxs)(x,{onClick:l,variant:"outline",size:"sm",disabled:!o,className:"gap-1 md:gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent disabled:opacity-50 text-xs md:text-sm",title:"Undo (Ctrl+Z)",children:[(0,a.jsx)(X.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Undo"})]}),i&&(0,a.jsxs)(x,{onClick:i,variant:"outline",size:"sm",disabled:!c,className:"gap-1 md:gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent disabled:opacity-50 text-xs md:text-sm",title:"Redo (Ctrl+Shift+Z)",children:[(0,a.jsx)(Y.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Redo"})]}),(0,a.jsxs)(x,{onClick:s,variant:"outline",size:"sm",className:"gap-1 md:gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent text-xs md:text-sm",children:[(0,a.jsx)(K.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Import"})]}),(0,a.jsxs)(x,{onClick:t,variant:"outline",size:"sm",className:"gap-1 md:gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent text-xs md:text-sm",children:[(0,a.jsx)(q.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"JSON"})]}),(0,a.jsxs)(x,{onClick:n,variant:"outline",size:"sm",className:"gap-1 md:gap-2 hover:bg-[var(--mars-blue-primary)] hover:text-white transition-colors bg-transparent text-xs md:text-sm",children:[(0,a.jsx)(B.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"PNG"})]}),(0,a.jsxs)(x,{onClick:r,size:"sm",className:"gap-1 md:gap-2 bg-[var(--mars-blue-primary)] hover:bg-[var(--mars-blue-light)] transition-colors text-xs md:text-sm",children:[(0,a.jsx)(W.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"PDF"})]})]})}let eo="mars-onepager-projects",ec="mars-onepager-active",ed=e=>Math.min(13,Math.floor(e/4)+1),em=[["Jan","Feb","Mar"],["Apr","May","Jun"],["Jul","Aug","Sep"],["Oct","Nov","Dec"]];function eu(){let e=localStorage.getItem(eo);return e?JSON.parse(e):[]}function ex(){return localStorage.getItem(ec)}function ep(e){localStorage.setItem(ec,e)}function eh(e){let t=eu(),s=t.findIndex(t=>t.id===e.id);s>=0?t[s]={...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(eo,JSON.stringify(t))}function eg(e,t){let s=t||{projectName:e,niicDate:new Date().toISOString().slice(0,7),kpis:[{label:"Money Plan",value:"1000",color:"green"},{label:"Money Fact",value:"850",color:"yellow"},{label:"Benefits",value:"150",color:"green"}],roles:{sponsor:"Sponsor Name",productOwner:"PO Name",projectManager:"PM Name"},projectStatus:"green",goal:"Project goal and objectives",description:"Detailed project description and context",yearGantt:{labels:[{top:"Jan",bottom:"P01 | Q1"},{top:"Feb",bottom:"P02 | Q1"},{top:"Mar",bottom:"P03 | Q1"},{top:"Apr",bottom:"P04 | Q2"},{top:"May",bottom:"P05 | Q2"},{top:"Jun",bottom:"P06 | Q2"},{top:"Jul",bottom:"P07 | Q3"},{top:"Aug",bottom:"P08 | Q3"},{top:"Sep",bottom:"P09 | Q3"},{top:"Oct",bottom:"P10 | Q4"},{top:"Nov",bottom:"P11 | Q4"},{top:"Dec",bottom:"P12 | Q4"},{top:"Dec",bottom:"P13 | Q4"}],rows:["Workstream 1","Workstream 2","Workstream 3"],bars:[{row:0,start:0,end:3,label:"Phase 1",status:"green"},{row:1,start:4,end:7,label:"Phase 2",status:"yellow"},{row:2,start:8,end:11,label:"Phase 3",status:"green"}],milestones:[{row:null,at:2,label:"Q1 Review"},{row:null,at:5,label:"Q2 Review"},{row:null,at:8,label:"Q3 Review"},{row:null,at:12,label:"Year End"}],nowCol:5,nowFrac:.5},quarterGantt:{labels:Array.from({length:52},(e,t)=>{var s;let a=ed(t),r=Math.floor(t/12),n=Math.floor(t%12/4),l=(null===(s=em[r])||void 0===s?void 0:s[n])||"Dec";return{top:"P".concat(a.toString().padStart(2,"0")),bottom:"".concat(l," | W").concat(t%4+1)}}),rows:["Task 1","Task 2","Task 3"],bars:[{row:0,start:0,end:3,label:"Sprint 1",status:"green"},{row:1,start:4,end:7,label:"Sprint 2",status:"green"}],milestones:[{row:null,at:8,label:"Q1 End"}],nowCol:5,nowFrac:.5},selectedQuarter:0,done:["Completed task 1","Completed task 2"],next:["Upcoming task 1","Upcoming task 2"],teamMetrics:[{label:"Velocity",value:"85%",color:"green"},{label:"Quality",value:"92%",color:"green"},{label:"Budget",value:"78%",color:"yellow"}],risks:[{risk:"Vendor dependency",impact:"red",mitigation:"Multi-vendor strategy"},{risk:"Resource availability",impact:"yellow",mitigation:"Cross-training team members"}],artifacts:[{label:"\uD83D\uDCC4 Passport",url:"#"},{label:"\uD83D\uDC65 Team",url:"#"},{label:"\uD83D\uDCCB Task Tracking",url:"#"},{label:"\uD83D\uDCD1 NIIC Presentation",url:"#"}],comments:"",extraSections:[]};return{id:"project-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e,data:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}var eb=s(6475),ef=s(8867);function ev(e){let{currentProjectId:t,onSelectProject:s,onCreateNew:n,onDuplicate:l}=e,[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),p=eu(),h=()=>{m.trim()&&(n(m.trim()),u(""))},g=e=>{confirm("Are you sure you want to delete this project?")&&(!function(e){let t=eu().filter(t=>t.id!==e);localStorage.setItem(eo,JSON.stringify(t)),ex()===e&&localStorage.removeItem(ec)}(e),window.location.reload())};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(x,{onClick:()=>d(!c),variant:"outline",className:"gap-2",children:[(0,a.jsx)(eb.Z,{className:"w-4 h-4"}),"Projects (",p.length,")"]}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),(0,a.jsxs)(i,{className:"absolute top-12 left-0 z-50 w-96 p-4 shadow-xl",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4 text-[var(--mars-blue-primary)]",children:"Project Manager"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)(o,{placeholder:"New project name...",value:m,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&h()}),(0,a.jsxs)(x,{onClick:h,size:"sm",className:"gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Create"]})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===p.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No projects yet. Create your first one!"}):p.map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg border transition-all ".concat(e.id===t?"border-[var(--mars-blue-primary)] bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{s(e),d(!1)},className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>l(e),title:"Duplicate project",children:(0,a.jsx)(ef.Z,{className:"w-3 h-3"})}),(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>g(e.id),title:"Delete project",children:(0,a.jsx)(R.Z,{className:"w-3 h-3 text-red-500"})})]})]})},e.id))})]})]})]})}var ew=s(5153);function ej(e){return{past:[],present:e,future:[]}}function ey(e){return e.past.length>0}function eN(e){return e.future.length>0}function ek(e,t){try{localStorage.setItem("mars-history-".concat(e),JSON.stringify(t))}catch(e){console.error("[v0] Failed to save history:",e)}}function eC(e,t){try{let t=localStorage.getItem("mars-history-".concat(e));if(t)return JSON.parse(t)}catch(e){console.error("[v0] Failed to load history:",e)}return ej(t)}let eS=[[1,2,3],[4,5,6],[7,8,9],[10,11,12,13]],eD=[["Jan","Feb","Mar"],["Apr","May","Jun"],["Jul","Aug","Sep"],["Oct","Nov","Dec"]],eM=[{start:0,end:11,periods:eS[0],months:eD[0]},{start:12,end:23,periods:eS[1],months:eD[1]},{start:24,end:35,periods:eS[2],months:eD[2]},{start:36,end:51,periods:eS[3],months:eD[3]}],eP=e=>Math.min(13,Math.floor(e/4)+1);function eE(){let{toast:e}=(0,ew.pm)(),t=(0,r.useCallback)(()=>{try{var t,s;let a=null===(s=window.native)||void 0===s?void 0:null===(t=s.exportFullPagePNG)||void 0===t?void 0:t.call(s);Promise.resolve(a).then(()=>{setTimeout(()=>{e({title:"Exported to PNG",description:"Full page PNG saved"})},250)})}catch(t){console.error(t),e({variant:"destructive",title:"PNG export failed"})}},[e]),s="true"===(0,n.useSearchParams)().get("presentation"),[l,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[x,p]=(0,r.useState)(!1),h=(0,r.useRef)(!0),g=(0,r.useRef)(""),b=(0,r.useCallback)(()=>{let t=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="".concat(null==o?void 0:o.projectName.replace(/\s+/g,"-"),"-").concat(new Date().toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(s),e({title:"Exported to JSON",description:"Project data has been exported successfully"})},[o,e]),f=(0,r.useCallback)(()=>{let t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=t=>{var s;let a=null===(s=t.target.files)||void 0===s?void 0:s[0];if(!a)return;let r=new FileReader;r.onload=t=>{try{var s;let a=JSON.parse(null===(s=t.target)||void 0===s?void 0:s.result);d(a),e({title:"Imported from JSON",description:"Project data has been loaded successfully"})}catch(t){e({title:"Import failed",description:"Invalid JSON file",variant:"destructive"})}},r.readAsText(a)},t.click()},[e]),v=(0,r.useCallback)(()=>{window.print(),e({title:"Exporting to PDF",description:"Use your browser print dialog to save as PDF"})},[e]);(0,r.useCallback)(async()=>{try{var t,s;await (null===(s=window.native)||void 0===s?void 0:null===(t=s.exportFullPagePNG)||void 0===t?void 0:t.call(s)),setTimeout(()=>{e({title:"Exported to PNG",description:"Full page PNG saved"})},250)}catch(t){console.error(t),e({variant:"destructive",title:"PNG export failed"})}},[]),(0,r.useEffect)(()=>{let e=eu(),t=ex();if(0===e.length){let e=eg("My First Project");eh(e),ep(e.id),i(e),d(e.data),u(eC(e.id,e.data)),g.current=JSON.stringify(e.data)}else{let s=e.find(e=>e.id===t)||e[0];i(s),d(s.data),ep(s.id),u(eC(s.id,s.data)),g.current=JSON.stringify(s.data)}h.current=!1},[]),(0,r.useEffect)(()=>{if(h.current||!l||!o||!m)return;let e=JSON.stringify(o);if(e===g.current)return;g.current=e;let t={...l,data:o,updatedAt:new Date().toISOString()};eh(t),i(t);let s=function(e,t){if(JSON.stringify(e.present)===JSON.stringify(t))return e;let s=[...e.past,e.present];return s.length>10&&s.shift(),{past:s,present:t,future:[]}}(m,o);u(s),ek(l.id,s)},[o]);let j=(0,r.useCallback)(()=>{if(!m||!ey(m))return;let t=function(e){if(!ey(e))return e;let t=e.past[e.past.length-1];return{past:e.past.slice(0,e.past.length-1),present:t,future:[e.present,...e.future]}}(m);u(t),d(t.present),ek(l.id,t),e({title:"Undo",description:"Reverted to previous state"})},[m,l,e]),y=(0,r.useCallback)(()=>{if(!m||!eN(m))return;let t=function(e){if(!eN(e))return e;let t=e.future[0],s=e.future.slice(1);return{past:[...e.past,e.present],present:t,future:s}}(m);u(t),d(t.present),ek(l.id,t),e({title:"Redo",description:"Restored next state"})},[m,l,e]),N=(0,r.useCallback)(t=>{let s=eg(t);(0,r.useEffect)(()=>{window.addEventListener("keydown",t=>{if((t.metaKey||t.ctrlKey)&&"4"===t.key){t.preventDefault();try{var s,a;let t=null===(a=window.native)||void 0===a?void 0:null===(s=a.exportFullPagePNG)||void 0===s?void 0:s.call(a);Promise.resolve(t).then(()=>{setTimeout(()=>{e({title:"Exported to PNG",description:"Full page PNG saved"})},250)})}catch(t){e({variant:"destructive",title:"PNG export failed"})}}})},[e]),eh(s),i(s),d(s.data),ep(s.id),u(ej(s.data)),g.current=JSON.stringify(s.data),e({title:"Project created",description:'Created new project "'.concat(t,'"')})},[e]),k=(0,r.useCallback)(t=>{let s=prompt("Enter name for duplicated project:","".concat(t.name," (Copy)"));if(s){let a=eg(s,t.data);eh(a),i(a),d(a.data),ep(a.id),u(ej(a.data)),g.current=JSON.stringify(a.data),e({title:"Project duplicated",description:'Created "'.concat(s,'" from "').concat(t.name,'"')})}},[e]),C=(0,r.useCallback)(()=>{if(!o)return{labels:[],rows:[],bars:[],milestones:[],nowCol:0,nowFrac:0};let e=eM[o.selectedQuarter],t=e.end-e.start+1,s=Array.from({length:t},(t,s)=>{let a=e.start+s,r=eP(a),n=e.months[Math.floor(s/4)]||e.months[e.months.length-1];return{top:"P".concat(r.toString().padStart(2,"0")),bottom:"".concat(n," | W").concat(a%4+1)}}),a=o.quarterGantt.bars.filter(t=>t.start>=e.start&&t.start<=e.end).map(s=>({...s,start:s.start-e.start,end:Math.min(s.end-e.start,t-1)})),r=o.quarterGantt.milestones.filter(t=>t.at>=e.start&&t.at<=e.end).map(t=>({...t,at:t.at-e.start}));return{labels:s,rows:o.quarterGantt.rows,bars:a,milestones:r,nowCol:Math.max(0,Math.min(o.quarterGantt.nowCol-e.start,t-1)),nowFrac:o.quarterGantt.nowFrac}},[o]),S=(0,r.useCallback)(t=>{i(t),d(t.data),ep(t.id),u(eC(t.id,t.data)),g.current=JSON.stringify(t.data),e({title:"Project loaded",description:'Switched to "'.concat(t.name,'"')})},[e]),D=(0,r.useCallback)(e=>{if(!o)return;let t=[{start:0,end:11},{start:12,end:23},{start:24,end:35},{start:36,end:51}][o.selectedQuarter],s=e.bars.map(e=>({...e,start:e.start+t.start,end:e.end+t.start})),a=e.milestones.map(e=>({...e,at:e.at+t.start})),r=o.quarterGantt.bars.filter(e=>e.start<t.start||e.start>t.end),n=o.quarterGantt.milestones.filter(e=>e.at<t.start||e.at>t.end);d({...o,quarterGantt:{...o.quarterGantt,rows:e.rows,bars:[...r,...s],milestones:[...n,...a],nowCol:e.nowCol+t.start,nowFrac:e.nowFrac}})},[o,d]);return((0,r.useEffect)(()=>{let t=t=>{let s=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey;if(s&&"z"===t.key&&!t.shiftKey){t.preventDefault(),j();return}if(s&&"z"===t.key&&t.shiftKey||s&&"y"===t.key){t.preventDefault(),y();return}if(s&&"s"===t.key){t.preventDefault(),e({title:"Auto-saved",description:"Your project is automatically saved"});return}if(s&&"e"===t.key){t.preventDefault(),b();return}if(s&&"p"===t.key){t.preventDefault(),v();return}if(s&&"n"===t.key){t.preventDefault();let e=prompt("Enter project name:","New Project");e&&N(e);return}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[j,y,b,v,N,e]),o&&l)?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[!s&&(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 print:hidden",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:(0,a.jsx)("div",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200 shadow-sm transition-transform duration-300 ".concat(x?"translate-y-0":"-translate-y-full"),children:(0,a.jsx)("div",{className:"max-w-[1600px] mx-auto px-4 py-3",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[(0,a.jsx)(ev,{currentProjectId:l.id,onSelectProject:S,onCreateNew:N,onDuplicate:k}),(0,a.jsx)(ei,{onExportJSON:b,onImportJSON:f,onExportPDF:v,onExportPNG:t,onUndo:j,onRedo:y,canUndo:!!m&&ey(m),canRedo:!!m&&eN(m)})]})})})}),(0,a.jsx)("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4 md:py-5",children:(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-4 md:space-y-5","data-content-area":!0,children:[(0,a.jsx)(c,{data:o,setData:d}),(0,a.jsx)(w,{data:o,setData:d}),(0,a.jsx)(T,{type:"year",title:"TOTAL Plan",data:o.yearGantt,onChange:e=>d({...o,yearGantt:e})}),(0,a.jsx)(T,{type:"quarter",title:"TOTAL Fact",data:C(),onChange:D,selectedQuarter:o.selectedQuarter,onQuarterChange:e=>d({...o,selectedQuarter:e})}),(0,a.jsx)(L,{data:o,setData:d}),(0,a.jsx)(J,{data:o,setData:d}),(0,a.jsx)(G,{data:o,setData:d}),(0,a.jsx)(Q,{data:o,setData:d}),(0,a.jsx)(U,{data:o,setData:d})]})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--mars-blue-primary)] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})}},5153:function(e,t,s){"use strict";s.d(t,{pm:function(){return u}});var a=s(2265);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[259,391,971,117,744],function(){return e(e.s=5277)}),_N_E=e.O()}]);